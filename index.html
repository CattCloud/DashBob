<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard Financiero</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script defer src="js/validation.js"></script>
  <script defer src="js/notificacion.js"></script>
  <script defer src="js/store.js"></script>
  <script defer src="js/modal.js"></script>
  <script defer src="js/app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
</head>
<body class="bg-gray-100 flex flex-col min-h-screen m-0">
  <div class="flex flex-col md:flex-row flex-1">
    <!-- Sidebar - móvil: arriba, tablet/desktop: izquierda -->
    <aside id="sidebar" class="w-full md:w-64 bg-cyan-900 text-white p-4 shadow-md">
      <div class="flex justify-start mb-6">
        <img src="./imagen/bob-subastas-logo.png" alt="Logo Bob Subastas" class="h-auto w-40" />
      </div>
      <nav class="space-y-2">
        <button data-section="dashboard" class="w-full text-left px-4 py-2 bg-cyan-700 rounded hover:bg-cyan-600">Dashboard</button>
        <button data-section="clientes" class="w-full text-left px-4 py-2 hover:bg-cyan-700 rounded">Clientes</button>
        <button data-section="ingresos" class="w-full text-left px-4 py-2 hover:bg-cyan-700 rounded">Ingresos</button>
        <button data-section="egresos" class="w-full text-left px-4 py-2 hover:bg-cyan-700 rounded">Egresos</button>
        <button data-section="reportes" class="w-full text-left px-4 py-2 hover:bg-cyan-700 rounded">Reportes</button>
      </nav>
    </aside>

    <!-- Main -->
    <main class="flex-1 p-4 md:p-6 overflow-y-auto">
      <!-- Dashboard -->
      <section id="dashboard" class="space-y-4">
        <h1 class="text-xl md:text-2xl font-bold">Resumen General</h1>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
          <div class="bg-white p-4 rounded shadow">
            <p>Total Ingresos</p>
            <p class="text-xl md:text-2xl font-bold text-green-600" id="total-ingresos">0</p>
          </div>
          <div class="bg-white p-4 rounded shadow">
            <p>Total Egresos</p>
            <p class="text-xl md:text-2xl font-bold text-red-600" id="total-egresos">0</p>
          </div>
          <div class="bg-white p-4 rounded shadow">
            <p>Balance General</p>
            <p class="text-xl md:text-2xl font-bold text-blue-600" id="balance-general">0</p>
          </div>
        </div>
        <div class="w-full h-64 md:h-80">
          <canvas id="chart-ingresos-egresos"></canvas>
        </div>
      </section>

      <!-- Clientes -->
      <section id="clientes" class="hidden space-y-4">
        <h2 class="text-xl md:text-2xl font-bold">Gestión de Clientes</h2>

        <div class="flex items-center space-x-4">
          <label class="cursor-pointer bg-gray-200 text-gray-800 px-4 py-2 rounded transition hover:bg-gray-300">
            Seleccionar archivo
            <input type="file" id="input-csv-clientes" accept=".csv" class="hidden">
          </label>
          <span id="archivo-nombre" class="text-gray-600 italic">Ningún archivo seleccionado</span>
          <button id="importar-btn" class="bg-purple-600 text-white px-4 py-2 rounded shadow-lg hover:bg-purple-700 transition duration-200">
            Importar CSV
          </button>
        </div>

        <form id="form-cliente" class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <input id="cliente-id" type="hidden" />
          <input id="cliente-email" type="email" placeholder="Correo Electrónico" class="p-2 border rounded w-full" required />
          <input id="cliente-nombre" type="text" placeholder="Nombre o Razón Social" class="p-2 border rounded w-full" required />
          <input id="cliente-telefono" type="text" placeholder="Celular" class="p-2 border rounded w-full" required />
          <select id="cliente-tipo-documento" class="p-2 border rounded w-full">
            <option value="DNI">DNI</option>
            <option value="RUC">RUC</option>
          </select>
          <input id="cliente-numero-documento" type="text" placeholder="Número de Documento" class="p-2 border rounded w-full" required />
          <!--input id="cliente-facturacion-ruc" type="text" placeholder="RUC (Facturación)" class="p-2 border rounded w-full" /-->
          <!--input id="cliente-facturacion-nombre" type="text" placeholder="Nombre/Razón Social (Facturación)" class="p-2 border rounded w-full" /-->
          <textarea id="cliente-observaciones" placeholder="Observaciones" class="p-2 border rounded md:col-span-2 w-full"></textarea>
          <div class="md:col-span-2 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded w-full sm:w-auto">Registrar Cliente</button>
            <button type="reset" id="cancelar-cliente" class="bg-gray-300 px-4 py-2 rounded w-full sm:w-auto">Cancelar</button>
          </div>
        </form>
        <div id="tabla-clientes" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto">
          <!-- Tabla responsiva generada dinámicamente -->
        </div>        
      </section>

      <!-- Ingresos -->
      <section id="ingresos" class="hidden space-y-4">
        <h2 class="text-xl md:text-2xl font-bold">Gestión de Ingresos</h2>
        <button id="nuevo-ingreso-btn" class="bg-green-500 text-white px-4 py-2 rounded w-full sm:w-auto">Nuevo Ingreso</button>
        <div class="flex items-center space-x-4">
          <label class="cursor-pointer bg-gray-200 text-gray-800 px-4 py-2 rounded transition hover:bg-gray-300">
            Seleccionar archivo
            <input type="file" id="input-csv-ingresos" accept=".csv" class="hidden">
          </label>
          <span id="archivo-nombre-ingreso" class="text-gray-600 italic">Ningún archivo seleccionado</span>
          <button id="importar-ingreso-btn" class="bg-purple-600 text-white px-4 py-2 rounded shadow-lg hover:bg-purple-700 transition duration-200">
            Importar CSV
          </button>
        </div>
        <form id="form-ingreso" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 hidden">
          <select id="ingreso-cliente" class="p-2 border rounded w-full" required>
            <option value="">Seleccione un cliente</option>
          </select>
          <select id="ingreso-medio" class="p-2 border rounded w-full" name="medio" required>
              <option value="">Seleccione medio de pago</option>
              <option value="Transferencia bancaria">Transferencia bancaria</option>
              <option value="Depósito">Depósito</option>
              <option value="Pago en efectivo">Pago en efectivo</option>
              <option value="Cheque">Cheque</option>
              <option value="Tarjeta de crédito">Tarjeta de crédito</option>
          </select>
          <select id="ingreso-banco" class="p-2 border rounded w-full" name="banco" required>
              <option value="">Seleccione banco</option>
              <option value="BanBif">Banco Interamericano de Finanzas (BanBif)</option>
              <option value="MiBanco">MiBanco</option>
              <option value="Banco Falabella">Banco Falabella</option>
              <option value="Scotiabank">Scotiabank</option>
              <option value="Banco Pichincha">Banco Pichincha</option>
              <option value="Banco de la Nacion">Banco de la Nación</option>
              <option value="Banco Ripley">Banco Ripley</option>
              <option value="BCP">Banco de Crédito del Perú (BCP)</option>
              <option value="BBVA">BBVA</option>
          </select>
            <select id="ingreso-moneda" class="p-2 border rounded w-full" name="moneda" required>
              <option value="PEN">PEN</option>
              <option value="USD">USD</option>
          </select>
          <select id="ingreso-concepto" name="concepto" class="p-2 border rounded w-full" required>
              <option value="Garantía por participación en subasta">Garantía por participación en subasta</option>
              <option value="Saldo a favor de cliente">Saldo a favor de cliente</option>
              <option value="Reembolso por transferencia excedente">Reembolso por transferencia excedente</option>
              <option value="Pago adicional para mejorar oferta">Pago adicional para mejorar oferta</option>
          </select> 
          <input type="number" id="ingreso-importe" class="p-2 border rounded w-full" name="importe" placeholder="Importe" required>
          <!--input id="ingreso-concepto" name="concepto" class="p-2 border rounded w-full" placeholder="Concepto" required></input-->
          <!--input type="text" id="vehiculo-datos" placeholder="Datos del Vehículo" class="p-2 border rounded w-full" required />
          <input type="text" id="subasta-detalles" placeholder="Detalles de Subasta" class="p-2 border rounded w-full" required />
          <input type="number" id="pago-garantia" placeholder="Monto Garantía" class="p-2 border rounded w-full" required />
          <input type="text" id="facturacion-ruc" placeholder="RUC (Facturación)" class="p-2 border rounded w-full" />
          <input type="text" id="facturacion-nombre" placeholder="Nombre/Razón Social (Facturación)" class="p-2 border rounded w-full" /-->
          <div class="md:col-span-2 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded w-full sm:w-auto">Guardar</button>
            <button type="reset" id="cancelar-ingreso" class="bg-gray-300 px-4 py-2 rounded w-full sm:w-auto">Cancelar</button>
          </div>
        </form>
        <div id="tabla-ingresos" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto">
          <!-- Tabla responsiva generada dinámicamente -->
        </div>
      </section>

      <!-- Egresos -->
      <section id="egresos" class="hidden space-y-4">
        <h2 class="text-xl md:text-2xl font-bold">Gestión de Egresos</h2>
        <button id="nuevo-egreso-btn" class="bg-red-500 text-white px-4 py-2 rounded w-full sm:w-auto">Nuevo Egreso</button>
        <div class="flex items-center space-x-4">
          <label class="cursor-pointer bg-gray-200 text-gray-800 px-4 py-2 rounded transition hover:bg-gray-300">
            Seleccionar archivo
            <input type="file" id="input-csv-egresos" accept=".csv" class="hidden">
          </label>
          <span id="archivo-nombre-egreso" class="text-gray-600 italic">Ningún archivo seleccionado</span>
          <button id="importar-egreso-btn" class="bg-purple-600 text-white px-4 py-2 rounded shadow-lg hover:bg-purple-700 transition duration-200">
            Importar CSV
          </button>
        </div>
        <form id="form-egreso" class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 hidden">
          <select id="egreso-cliente" class="p-2 border rounded w-full" required>
            <option value="">Seleccione un cliente</option>
          </select>
          <p id="saldo-disponible" class="md:col-span-2 text-gray-700 font-bold">Saldo disponible: S/ 0.00</p>
          <input type="number" id="egreso-monto" placeholder="Monto a Devolver" class="p-2 border rounded w-full" required />
          <select id="egreso-medio" class="p-2 border rounded w-full" name="medio" required>
            <option value="">Seleccione medio</option>
            <option value="Transferencia bancaria">Transferencia bancaria</option>
            <option value="Depósito">Depósito</option>
            <option value="Pago en efectivo">Pago en efectivo</option>
            <option value="Cheque">Cheque</option>
            <option value="Tarjeta de crédito">Tarjeta de crédito</option>
        </select>
        <select id="egreso-banco" class="p-2 border rounded w-full" name="banco" required>
            <option value="">Seleccione banco</option>
            <option value="BanBif">Banco Interamericano de Finanzas (BanBif)</option>
            <option value="MiBanco">MiBanco</option>
            <option value="Banco Falabella">Banco Falabella</option>
            <option value="Scotiabank">Scotiabank</option>
            <option value="Banco Pichincha">Banco Pichincha</option>
            <option value="Banco de la Nacion">Banco de la Nación</option>
            <option value="Banco Ripley">Banco Ripley</option>
            <option value="BCP">Banco de Crédito del Perú (BCP)</option>
            <option value="BBVA">BBVA</option>
        </select>
          <select id="egreso-moneda" class="p-2 border rounded w-full" name="moneda" required>
            <option value="PEN">PEN</option>
            <option value="USD">USD</option>
        </select>
          <!--input type="text" id="numero-cuenta" placeholder="Número de Cuenta/CCI" class="p-2 border rounded w-full" required /-->
          <select id="egreso-concepto" name="concepto-egreso" class="p-2 border rounded w-full" required>
              <option value="Devolución de garantía al cliente">Devolución de monto de garantía</option>
              <option value="Reembolso por cancelación de subasta">Reembolso por cancelación de subasta</option>
              <option value="Pago al proveedor por vehículo adquirido">Pago al proveedor por vehículo adquirido</option>
              <option value="Ajuste de saldo por transacción finalizada">Ajuste de saldo por transacción finalizada</option>
              <option value="Otros egresos relacionados">Otros egresos relacionados</option>
          </select>
          <div class="md:col-span-2 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded w-full sm:w-auto">Guardar</button>
            <button type="reset" id="cancelar-egreso" class="bg-gray-300 px-4 py-2 rounded w-full sm:w-auto">Cancelar</button>
          </div>
        </form>
        <div id="tabla-egresos" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto">
          <!-- Tabla responsiva generada dinámicamente -->
        </div>
      </section>

      <!-- Reportes -->
      <section id="reportes" class="hidden space-y-4">
        <h2 class="text-xl md:text-2xl font-bold">Reportes por Cliente</h2>
        <form id="form-reporte" class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <select id="reporte-cliente" class="p-2 border rounded w-full" required>
            <option value="">Seleccione un cliente</option>
          </select>
          <input type="date" id="fecha-inicio" class="p-2 border rounded w-full" />
          <div class="md:col-span-3 space-y-2 sm:space-y-0">
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded w-full sm:w-auto">Generar Reporte</button>
          </div>
        </form>
        <div id="resultado-reporte" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto"></div>
      </section>

          <!-- Modal reutilizable para eliminacion -->
          <div id="modal-confirmacion" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-6 space-y-4 text-center">
              <h2 class="text-xl font-bold text-gray-800" id="modal-titulo">¿Estás seguro?</h2>
              <p class="text-gray-600" id="modal-mensaje">Esta acción no se puede deshacer.</p>
          
              <div class="flex justify-center gap-4 mt-6">
                <button id="btn-cancelar" class="px-4 py-2 border text-gray-800 rounded hover:bg-gray-200">
                  Cancelar
                </button>
                <button id="btn-confirmar" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
                  Eliminar
                </button>
              </div>
            </div>
          </div>

    </main>
  </div>

  
  
  <footer class="w-full bg-gray-100 p-4 text-center text-sm text-gray-600 border-t border-gray-200">
    © 2025 BOB SUBASTAS. Todos los derechos reservados.
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
</body>
</html>