<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard Financiero</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="js/utils/datosValidos.js"></script>
  <script defer src="js/utils/validation.js"></script>
  <script defer src="js/utils/notificacion.js"></script>
  <script defer src="js/models/cliente.js"></script>
  <script defer src="js/models/transaccion.js"></script>
  <script type="module" defer src="./js/store/store.js"></script>
  <script defer src="js/ui/form-ui.js"></script>
  <script defer src="js/utils/formTemplate.js"></script>
  <script defer src="js/ui/modal.js"></script>
  <script defer src="js/ui/dom-helpers.js"></script>
  <script defer src="js/ui/dashboard-ui.js"></script>
  <script defer src="js/ui/cliente-ui.js"></script>
  <script defer src="js/ui/ingreso-ui.js"></script>
  <script defer src="js/ui/egreso-ui.js"></script>
  <script defer src="js/services/cliente-service.js"></script>
  <script defer src="js/services/ingreso-service.js"></script>
  <script defer src="js/services/egreso-service.js"></script>
  <script defer src="js/listeners/cliente-listeners.js"></script>
  <script defer src="js/listeners/egresos-listeners.js"></script>
  <script defer src="js/listeners/ingreso-listeners.js"></script>
  <script defer src="js/importers/cliente-importer.js"></script>
  <script defer src="js/importers/transaction-importer.js"></script>
  <script defer src="js/utils/init.js"></script>
  <script defer src="js/app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
</head>
<body class="bg-gray-100 flex flex-col min-h-screen m-0">
  <div class="flex flex-col md:flex-row flex-1">
    <!-- Sidebar - móvil: arriba, tablet/desktop: izquierda -->
    <aside id="sidebar" class="w-full md:w-64 bg-cyan-900 text-white p-4 shadow-md">
      <div class="flex justify-start mb-6">
        <img src="./imagen/bob-subastas-logo.png" alt="Logo Bob Subastas" class="h-auto w-40" />
      </div>
      <nav class="space-y-2">
        <button data-section="dashboard" class="w-full text-left px-4 py-2 bg-cyan-700 rounded hover:bg-cyan-600">Dashboard</button>
        <button data-section="clientes" class="w-full text-left px-4 py-2 hover:bg-cyan-700 rounded">Clientes</button>
        <button data-section="ingresos" class="w-full text-left px-4 py-2 hover:bg-cyan-700 rounded">Ingresos</button>
        <button data-section="egresos" class="w-full text-left px-4 py-2 hover:bg-cyan-700 rounded">Egresos</button>
        <button data-section="reportes" class="w-full text-left px-4 py-2 hover:bg-cyan-700 rounded">Reportes</button>
      </nav>
    </aside>

    <!-- Main -->
    <main class="flex-1 p-4 md:p-6 overflow-y-auto">
      <!-- Dashboard -->
      <section id="dashboard" class="space-y-4">
        <h1 class="text-xl md:text-2xl font-bold">Resumen General</h1>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
          <div class="bg-white p-4 rounded shadow">
            <p>Total Ingresos</p>
            <p class="text-xl md:text-2xl font-bold text-green-600" id="total-ingresos">0</p>
          </div>
          <div class="bg-white p-4 rounded shadow">
            <p>Total Egresos</p>
            <p class="text-xl md:text-2xl font-bold text-red-600" id="total-egresos">0</p>
          </div>
          <div class="bg-white p-4 rounded shadow">
            <p>Balance General</p>
            <p class="text-xl md:text-2xl font-bold text-blue-600" id="balance-general">0</p>
          </div>
        </div>
        <div class="w-full h-64 md:h-80">
          <canvas id="chart-ingresos-egresos"></canvas>
        </div>
      </section>

      <!-- Clientes -->
      <section id="clientes" class="hidden space-y-4">
        <h2 class="text-xl md:text-2xl font-bold">Gestión de Clientes</h2>
        <button id="nuevo-cliente-btn" class="bg-red-500 text-white px-4 py-2 rounded w-full sm:w-auto">Nuevo Cliente</button>

        <div class="flex items-center space-x-4">
          <label class="cursor-pointer bg-gray-200 text-gray-800 px-4 py-2 rounded transition hover:bg-gray-300">
            Seleccionar archivo
            <input type="file" id="input-csv-clientes" accept=".csv" class="hidden">
          </label>
          <span id="archivo-nombre" class="text-gray-600 italic">Ningún archivo seleccionado</span>
          <button id="importar-btn" class="bg-purple-600 text-white px-4 py-2 rounded shadow-lg hover:bg-purple-700 transition duration-200">
            Importar CSV
          </button>
        </div>
        <div id="tabla-clientes" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto">
          <!-- Tabla responsiva generada dinámicamente -->
        </div>        
      </section>

      <!-- Ingresos -->
      <section id="ingresos" class="hidden space-y-4">
        <h2 class="text-xl md:text-2xl font-bold">Gestión de Ingresos</h2>
        <button id="nuevo-ingreso-btn" class="bg-green-500 text-white px-4 py-2 rounded w-full sm:w-auto">Nuevo Ingreso</button>
        <div class="flex items-center space-x-4">
          <label class="cursor-pointer bg-gray-200 text-gray-800 px-4 py-2 rounded transition hover:bg-gray-300">
            Seleccionar archivo
            <input type="file" id="input-csv-ingresos" accept=".csv" class="hidden">
          </label>
          <span id="archivo-nombre-ingreso" class="text-gray-600 italic">Ningún archivo seleccionado</span>
          <button id="importar-ingreso-btn" class="bg-purple-600 text-white px-4 py-2 rounded shadow-lg hover:bg-purple-700 transition duration-200">
            Importar CSV
          </button>
        </div>

        <div id="tabla-ingresos" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto">
          <!-- Tabla responsiva generada dinámicamente -->
        </div>

        <h3 class="text-lg md:text-xl font-bold">Ingresos Devueltos</h3>
        <div id="tabla-ingresos-devuelto" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto">
          <!-- Tabla responsiva generada dinámicamente -->
        </div>
      </section>

      <!-- Egresos -->
      <section id="egresos" class="hidden space-y-4">
        <h2 class="text-xl md:text-2xl font-bold">Gestión de Egresos</h2>
        <button id="nuevo-egreso-btn" class="bg-red-500 text-white px-4 py-2 rounded w-full sm:w-auto">Nuevo Egreso</button>
        <div class="flex items-center space-x-4">
          <label class="cursor-pointer bg-gray-200 text-gray-800 px-4 py-2 rounded transition hover:bg-gray-300">
            Seleccionar archivo
            <input type="file" id="input-csv-egresos" accept=".csv" class="hidden">
          </label>
          <span id="archivo-nombre-egreso" class="text-gray-600 italic">Ningún archivo seleccionado</span>
          <button id="importar-egreso-btn" class="bg-purple-600 text-white px-4 py-2 rounded shadow-lg hover:bg-purple-700 transition duration-200">
            Importar CSV
          </button>
        </div>

        <div id="tabla-egresos" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto">
          <!-- Tabla responsiva generada dinámicamente -->
        </div>
      </section>

      <!-- Reportes -->
      <section id="reportes" class="hidden space-y-4">
        <h2 class="text-xl md:text-2xl font-bold">Reportes por Cliente</h2>
        <form id="form-reporte" class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <select id="reporte-cliente" class="p-2 border rounded w-full" required>
            <option value="">Seleccione un cliente</option>
          </select>
          <input type="date" id="fecha-inicio" class="p-2 border rounded w-full" />
          <div class="md:col-span-3 space-y-2 sm:space-y-0">
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded w-full sm:w-auto">Generar Reporte</button>
          </div>
        </form>
        <div id="resultado-reporte" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto"></div>
      </section>

          <!-- Modal reutilizable para eliminacion -->
          <div id="modal-confirmacion" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-6 space-y-4 text-center">
              <h2 class="text-xl font-bold text-gray-800" id="modal-titulo">¿Estás seguro?</h2>
              <p class="text-gray-600" id="modal-mensaje">Esta acción no se puede deshacer.</p>
          
              <div class="flex justify-center gap-4 mt-6">
                <button id="btn-cancelar" class="px-4 py-2 border text-gray-800 rounded hover:bg-gray-200">
                  Cancelar
                </button>
                <button id="btn-confirmar" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
                  Eliminar
                </button>
              </div>
            </div>
          </div>


          <!-- Modal Reutilizable -->
      <div id="modal-reutilizable" class="fixed inset-0 bg-black/50 bg-opacity-40 flex items-center justify-center z-50 hidden">
              <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6">
                        
                        <!-- Título -->
                  <h2 id="modal-reutilizable-tittle" class="text-2xl font-bold text-center mb-4">Título del Modal</h2>
                        <!-- Formulario dinámico -->
                  <div class="modal-body space-y-3">
                          <div id="modal-content">
                              <!-- Aquí se inyecta el contenido modal.js -->
                          </div>      
                          <form id="form-modal" class="mt-4 flex flex-wrap gap-4 w-auto">
                            <!-- Aquí se inyecta el contenido modal.js -->
                          </form>
                  </div>                     
              </div>
        </div>
          
          
    </main>
  </div>

  
  <footer class="w-full bg-gray-100 p-4 text-center text-sm text-gray-600 border-t border-gray-200">
    © 2025 BOB SUBASTAS. Todos los derechos reservados.
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
</body>
</html>