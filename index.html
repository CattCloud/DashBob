<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard Financiero</title>
  <!--script src="https://cdn.jsdelivr.net/npm/chart.js"></!--script-->
  <script src="js/utils/datosValidos.js"></script>
  <script defer src="js/utils/validation.js"></script>
  <script defer src="js/utils/notificacion.js"></script>
  <script defer src="js/models/cliente.js"></script>
  <script defer src="js/models/transaccion.js"></script>
  <script type="module" defer src="./js/store/store.js"></script>
  <script defer src="js/ui/form-ui.js"></script>
  <script defer src="js/utils/formTemplate.js"></script>
  <script defer src="js/utils/modelTemplates.js"></script>
  <script defer src="js/ui/modal.js"></script>
  <script defer src="js/models/filter-manager-cliente.js"></script>
  <script defer src="js/models/filter.manager.transaccion.js"></script>
  <script defer src="js/ui/dom-helpers.js"></script>
  <script defer src="js/ui/dashboard-ui.js"></script>
  <script defer src="js/ui/dashboard-cliente-ui.js"></script>
  <script defer src="js/ui/cliente-ui.js"></script>
  <script defer src="js/ui/ingreso-ui.js"></script>
  <script defer src="js/ui/egreso-ui.js"></script>
  <script defer src="js/ui/detalle-cliente-ui.js"></script>
  <script defer src="js/services/cliente-service.js"></script>
  <script defer src="js/services/ingreso-service.js"></script>
  <script defer src="js/services/egreso-service.js"></script>
  <script defer src="js/services/reporter-service.js"></script>
  <script defer src="js/listeners/cliente-listeners.js"></script>
  <script defer src="js/listeners/egresos-listeners.js"></script>
  <script defer src="js/listeners/ingreso-listeners.js"></script>
  <script defer src="js/importers/cliente-importer.js"></script>
  <script defer src="js/importers/transaction-importer.js"></script>
  <script defer src="js/utils/init.js"></script>
  <script defer src="js/app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
</head>

<body class="bg-gray-100 flex flex-col min-h-screen m-0">
  <div class="flex flex-col md:flex-row flex-1">
    <!-- Sidebar - móvil: arriba, tablet/desktop: izquierda -->
    <aside id="sidebar" class="w-full md:w-64 bg-cyan-900 text-white p-4 shadow-md">
      <div class="flex justify-start mb-6">
        <img src="./imagen/bob-subastas-logo.png" alt="Logo Bob Subastas" class="h-auto w-40" />
      </div>

      <!-- Dashboard -->
      <nav class="space-y-2">
        <div class="group">
          <button class="w-full flex items-center justify-between px-4 py-2 rounded hover:bg-cyan-700"
            onclick="toggleSubMenu('dashboard-menu')">
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" />
              </svg>
              <span>Dashboards</span>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
              stroke="currentColor" class="size-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
            </svg>
          </button>
          <div id="dashboard-menu" class="ml-4 space-y-2 hidden">
            <button data-section="dashboard-general"
              class="section-btn w-full text-left px-4 py-2 rounded hover:bg-cyan-700 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" />
              </svg>
              Dashboard General
            </button>
            <button data-section="dashboard-cliente"
              class="section-btn w-full text-left px-4 py-2 rounded hover:bg-cyan-700 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" />
              </svg>
              Dashboard por Cliente
            </button>
          </div>
        </div>

        <!-- Clientes -->
        <div class="group">
          <button class="w-full flex items-center justify-between px-4 py-2 rounded hover:bg-cyan-700"
            onclick="toggleSubMenu('clientes-menu')">
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z" />
              </svg>
              <span>Clientes</span>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
              stroke="currentColor" class="size-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
            </svg>
          </button>
          <div id="clientes-menu" class="ml-4 space-y-2 hidden">

            <button data-section="clientes"
              class="section-btn w-full text-left px-4 py-2 rounded hover:bg-cyan-700 flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />
              </svg>
              Gestión de Clientes
            </button>
            <button data-section="detalle-cliente"
              class="section-btn w-full text-left px-4 py-2 rounded hover:bg-cyan-700 flex items-center gap-2">

              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
              </svg>
              Detalle del Cliente
            </button>
          </div>
        </div>

        <!-- Ingresos -->
        <button data-section="ingresos"
          class="section-btn w-full flex items-center px-4 py-2 rounded hover:bg-cyan-700 gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941" />
          </svg>
          <span>Ingresos</span>
        </button>

        <!-- Egresos -->
        <button data-section="egresos"
          class="section-btn w-full flex items-center px-4 py-2 rounded hover:bg-cyan-700 gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181" />
          </svg>
          <span>Egresos</span>
        </button>

        <!-- Reportes -->
        <!--button data-section="reportes"
          class="section-btn w-full flex items-center px-4 py-2 rounded hover:bg-cyan-700 gap-2">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z" />
          </svg>
          <span>Reportes</span>
        </!--button-->
      </nav>
    </aside>

    <script>
      function toggleSubMenu(menuId) {
        document.getElementById(menuId).classList.toggle("hidden");
      }
    </script>

    <!-- Main -->
    <main class="flex-1 p-4 md:p-6 overflow-y-auto">
      <!-- Dashboard -->
      <section id="dashboard-general" class="space-y-6">

        <!-- Título principal -->
        <h2 class="text-2xl font-bold text-gray-800">Resumen General</h2>

        <!-- Grid de tarjetas KPI -->
        <div class="grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 lg:gap-4">

          <!-- Tarjeta: Total Clientes -->
          <div class="bg-gray-50 p-5 rounded-xl shadow-md flex flex-col items-center gap-2">
            <p class="text-gray-600 text-sm font-bold">Total Clientes</p>
            <p class="text-2xl font-bold text-blue-800" id="total-clientes">0</p>
          </div>

          <!-- Tarjeta: Total Ingresos -->
          <div class="bg-gray-50 p-5 rounded-xl shadow-md flex flex-col items-center gap-2">
            <p class="text-gray-600 text-sm font-bold">Total Ingresos</p>
            <p class="text-2xl font-bold text-green-600" id="total-ingresos">0</p>
          </div>

          <!-- Tarjeta: Total Egresos -->
          <div class="bg-gray-50 p-5 rounded-xl shadow-md flex flex-col items-center gap-2">
            <p class="text-gray-600 text-sm font-bold">Total Egresos</p>
            <p class="text-2xl font-bold text-red-600" id="total-egresos">0</p>
          </div>

          <!-- Tarjeta: Balance General -->
          <div class="bg-gray-50 p-5 rounded-xl shadow-md flex flex-col items-center gap-2">
            <p class="text-gray-600 text-sm font-bold">Balance General</p>
            <p class="text-2xl font-bold text-blue-700" id="balance-general">0</p>
          </div>

          <!-- Tarjeta: Ingresos Devueltos -->
          <div class="bg-gray-50 p-5 rounded-xl shadow-md flex flex-col items-center gap-2">
            <p class="text-gray-600 text-sm font-bold">Ingresos Devueltos</p>
            <p class="text-2xl font-bold text-yellow-500" id="total-devueltos">0</p>
          </div>

          <!-- Tarjeta: Clientes con Saldo a Favor -->
          <div class="bg-gray-50 p-5 rounded-xl shadow-md flex flex-col items-center gap-2">
            <p class="text-gray-600 text-sm font-bold">Clientes con Saldo a Favor</p>
            <p class="text-2xl font-bold text-teal-600" id="clientes-saldo-favor">0</p>
          </div>

          <!-- Tarjeta: Clientes sin Transacciones -->
          <div class="bg-gray-50 p-5 rounded-xl shadow-md flex flex-col items-center gap-2">
            <p class="text-gray-600 text-sm font-bold">Clientes sin Transacciones</p>
            <p class="text-2xl font-bold text-gray-600" id="clientes-sin-transacciones">0</p>
          </div>

        </div>



        <!-- Sección de Gráficos -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6">

          <!-- Gráfico 1: Ingresos vs Egresos -->
          <div class="bg-white p-5 rounded-xl shadow-md">
            <h3 class="text-lg font-semibold text-gray-700 mb-4">Ingresos vs Egresos</h3>
            <div id="chart-ingresos-egresos"></div>
          </div>
          <!-- Gráfico 4: Balance Mensual -->
          <div class="bg-white p-5 rounded-xl shadow-md">
            <h3 class="text-lg font-semibold text-gray-700 mb-4">Balance Mensual</h3>
            <div id="chart-balance-mensual"></div>
          </div>

          <!-- Gráfico 2: Distribución Estados Ingresos -->
          <div class="bg-white p-5 rounded-xl shadow-md">
            <h3 class="text-lg font-semibold text-gray-700 mb-4">Estados de Ingresos</h3>
            <div id="chart-estados-ingresos"></div>
          </div>

          <!-- Gráfico 3: Distribución Estados Egresos -->
          <div class="bg-white p-5 rounded-xl shadow-md">
            <h3 class="text-lg font-semibold text-gray-700 mb-4">Estados de Egresos</h3>
            <div id="chart-estados-egresos"></div>
          </div>


          <!-- Gráfico 5: Top 5 Clientes -->
          <div class="bg-white p-5 rounded-xl shadow-md lg:col-span-2">
            <h3 class="text-lg font-semibold text-gray-700 mb-4">Top 5 Clientes por Ingresos</h3>
            <div id="chart-top-clientes"></div>
          </div>

        </div>

      </section>


      <section id="dashboard-cliente" class="space-y-6 hidden">
        <div class="flex justify-between sm:items-center flex-col sm:flex-row">
          <h2 class="text-xl md:text-2xl font-bold">Dashboard de Cliente</h2>

          <!-- Selector de Cliente -->
          <div class="flex items-center justify-end gap-3 grow mt-6 sm:mt-0">

            <!-- Label -->
            <label for="cliente-dashboard-select" class="text-lg font-bold text-gray-700">Cliente</label>

            <!-- Select dinámico -->
            <select id="cliente-dashboard-select" onchange="cargarDashboardCliente(this.value)"
              class="border border-gray-300 bg-white rounded px-4 py-2 w-full md:w-1/2">
              <!-- Opciones generadas por JS -->
            </select>

            <!-- Botón buscar cliente -->
            <button onclick="searchDashboardCliente()"
              class="bg-[#f8a703] hover:bg-yellow-300 text-white rounded p-2 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="white"
                class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
              </svg>
            </button>


            <div id="container-irdetalle-cliente">
              <!-- Botón Detalle del Cliente (solo se muestra si hay un cliente seleccionado) -->
              <button onclick="irADetalleClienteActual()"
                class="bg-[#34898d] hover:bg-blue-300 text-white rounded p-2 flex items-center hidden"
                id="irdetalle-cliente-btn" title="Ir Detalle del Cliente">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                  stroke="currentColor" class="size-6">
                  <path stroke-linecap="round" stroke-linejoin="round"
                    d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m5.231 13.481L15 17.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v16.5c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Zm3.75 11.625a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z" />
                </svg>
              </button>
            </div>
          </div>
        </div>


        <!-- Tarjetas Informativas -->
        <div id="cards-cliente-dashboard" class="grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 lg:gap-4">
          <!-- Cards inyectadas dinámicamente -->
        </div>

        <!-- Gráficos -->
        <div id="charts-dashboard-cliente" class="grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6 hidden">
          <div class="bg-white rounded shadow p-4">
            <h3 class="text-center font-bold mb-4">Ingresos vs Egresos</h3>
            <div id="chart-cliente-ingresos-egresos"></div>
          </div>

          <div class="bg-white rounded shadow p-4">
            <h3 class="text-center font-bold mb-4">Distribución Estados Ingresos</h3>
            <div id="chart-cliente-estados-ingresos"></div>
          </div>

          <div class="bg-white rounded shadow p-4">
            <h3 class="text-center font-bold mb-4">Distribución Estados Egresos</h3>
            <div id="chart-cliente-estados-egresos"></div>
          </div>

          <div class="bg-white rounded shadow p-4">
            <h3 class="text-center font-bold mb-4">Saldo Histórico</h3>
            <div id="chart-cliente-saldo"></div>
          </div>
        </div>
      </section>


      <!-- Clientes -->
      <section id="clientes" class="hidden space-y-4">
        <div class="flex justify-between sm:items-center flex-col sm:flex-row ">
          <h2 class="text-xl md:text-2xl font-bold">Gestión de Clientes</h2>

          <div class="flex gap-4 items-center mt-3 sm:mt-0">
            <button id="nuevo-cliente-btn"
              class="bg-[#f8a703] hover:bg-yellow-300 text-white justify-center px-4 py-2 gap-2 flex items-center rounded w-full sm:w-auto font-bold ">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z" />
              </svg>
              Nuevo Cliente
            </button>
            <div class="flex items-center space-x-4">
              <input type="file" id="input-csv-clientes" accept=".csv" class="hidden">
              <button id="importar-btn" title="Importar CSV de clientes"
                class="bg-[#34898d] font-bold text-white p-2 rounded shadow-lg hover:bg-blue-400 transition duration-200">
                <svg fill="#ffffff" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"
                  class="size-6">
                  <g id="SVGRepo_bgCarrier" stroke-width="2"></g>
                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                  <g id="SVGRepo_iconCarrier">
                    <path
                      d="m807.186 686.592 272.864 272.864H0v112.94h1080.05l-272.864 272.978 79.736 79.849 409.296-409.183-409.296-409.184-79.736 79.736ZM1870.419 434.69l-329.221-329.11C1509.688 74.07 1465.979 56 1421.48 56H451.773v730.612h112.94V168.941h790.584v451.762h451.762v1129.405H564.714v-508.233h-112.94v621.173H1920V554.52c0-45.176-17.619-87.754-49.58-119.83Zm-402.181-242.37 315.443 315.442h-315.443V192.319Z"
                      fill-rule="evenodd"></path>
                  </g>
                </svg> </button>
            </div>
          </div>
        </div>



        <!-- 🔍 Barra de control de tabla -->
        <div class="flex items-center justify-between mb-4 flex-col sm:flex-row sm:gap-1">
          <div class="flex items-center gap-1">
          
            <!-- Select de ordenamiento -->
            <select id="select-orden-cliente"
              class="border border-gray-300 bg-white rounded px-3 py-2 mb-3 sm:mb-0 w-full sm:w-auto"
              onchange="window.clienteFilter.setOrden(this.value)">
              <option value="fecha">Fecha de Registro</option>
              <option value="nombre">Nombre (A-Z)</option>
              <option value="mayorSaldo">Mayor saldo</option>
              <option value="menorSaldo">Menor saldo</option>
              <option value="mayorIngreso">Mayor ingreso</option>
              <option value="mayorEgreso">Mayor egreso</option>
            </select>
            <!-- Para exportar CSV -->
          
            <button title="Exportar CSV de Clientes" onclick="prepareClientTableForExportCSV('clientesCSV', 'tabla-general-cliente')"
              class="bg-green-600 text-white p-2 rounded hover:bg-green-700">
              <svg fill="#ffffff" class="size-6" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48" xml:space="preserve" stroke="#ffffff">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <g>
                    <g>
                      <path
                        d="M47.987,21.938c-0.006-0.091-0.023-0.178-0.053-0.264c-0.011-0.032-0.019-0.063-0.033-0.094 c-0.048-0.104-0.109-0.202-0.193-0.285c-0.001-0.001-0.001-0.001-0.001-0.001L42,15.586V10c0-0.022-0.011-0.041-0.013-0.063 c-0.006-0.088-0.023-0.173-0.051-0.257c-0.011-0.032-0.019-0.063-0.034-0.094c-0.049-0.106-0.11-0.207-0.196-0.293l-9-9 c-0.086-0.086-0.187-0.148-0.294-0.196c-0.03-0.014-0.06-0.022-0.091-0.032c-0.085-0.03-0.172-0.047-0.263-0.052 C32.039,0.01,32.021,0,32,0H7C6.448,0,6,0.448,6,1v14.586l-5.707,5.707c0,0-0.001,0.001-0.002,0.002 c-0.084,0.084-0.144,0.182-0.192,0.285c-0.014,0.031-0.022,0.062-0.033,0.094c-0.03,0.086-0.048,0.173-0.053,0.264 C0.011,21.96,0,21.978,0,22v19c0,0.552,0.448,1,1,1h5v5c0,0.552,0.448,1,1,1h34c0.552,0,1-0.448,1-1v-5h5c0.552,0,1-0.448,1-1V22 C48,21.978,47.989,21.96,47.987,21.938z M44.586,21H42v-2.586L44.586,21z M38.586,9H33V3.414L38.586,9z M8,2h23v8 c0,0.552,0.448,1,1,1h8v5v5H8v-5V2z M6,18.414V21H3.414L6,18.414z M40,46H8v-4h32V46z M46,40H2V23h5h34h5V40z">
                      </path>
                      <path
                        d="M23.422,27.885c0.147-0.136,0.312-0.235,0.493-0.298c0.181-0.062,0.368-0.093,0.561-0.093 c0.669,0,1.224,0.266,1.666,0.799l1.122-1.462c-0.329-0.385-0.734-0.677-1.215-0.876c-0.482-0.198-1.028-0.297-1.64-0.297 c-0.419,0-0.833,0.071-1.241,0.212c-0.408,0.142-0.774,0.36-1.097,0.655c-0.323,0.295-0.584,0.666-0.782,1.113 c-0.198,0.448-0.298,0.984-0.298,1.607c0,0.499,0.065,0.926,0.195,1.283c0.13,0.358,0.306,0.669,0.527,0.935 c0.221,0.267,0.476,0.496,0.765,0.689c0.289,0.193,0.598,0.368,0.927,0.527c0.521,0.261,0.952,0.544,1.292,0.85 c0.34,0.306,0.51,0.72,0.51,1.241c0,0.533-0.142,0.946-0.425,1.241s-0.64,0.442-1.071,0.442c-0.385,0-0.762-0.091-1.131-0.272 s-0.683-0.431-0.944-0.748l-1.105,1.496c0.34,0.397,0.793,0.725,1.36,0.986c0.567,0.261,1.184,0.391,1.853,0.391 c0.465,0,0.907-0.079,1.326-0.238c0.419-0.159,0.785-0.394,1.097-0.706c0.312-0.311,0.561-0.694,0.748-1.147 c0.187-0.453,0.281-0.975,0.281-1.564c0-0.51-0.079-0.952-0.238-1.326c-0.159-0.374-0.363-0.697-0.612-0.969 c-0.249-0.272-0.527-0.504-0.833-0.697c-0.306-0.193-0.606-0.363-0.901-0.51c-0.499-0.249-0.901-0.513-1.207-0.791 c-0.306-0.277-0.459-0.671-0.459-1.181c0-0.295,0.042-0.55,0.128-0.765C23.159,28.197,23.275,28.021,23.422,27.885z">
                      </path>
                      <path
                        d="M15.177,28.854c0.204-0.397,0.459-0.711,0.765-0.944c0.306-0.232,0.663-0.348,1.071-0.348 c0.737,0,1.337,0.334,1.802,1.003l1.173-1.428c-0.329-0.476-0.754-0.841-1.275-1.097c-0.521-0.255-1.128-0.382-1.819-0.382 c-0.669,0-1.278,0.156-1.828,0.467c-0.55,0.312-1.017,0.748-1.403,1.309c-0.385,0.562-0.683,1.23-0.892,2.006 c-0.21,0.777-0.314,1.624-0.314,2.542c0,0.918,0.105,1.762,0.314,2.533s0.504,1.436,0.884,1.997 c0.38,0.562,0.844,1.001,1.394,1.318s1.165,0.476,1.845,0.476c0.748,0,1.368-0.147,1.861-0.442s0.898-0.68,1.215-1.156 l-1.173-1.377c-0.193,0.295-0.434,0.544-0.722,0.748s-0.632,0.306-1.028,0.306c-0.419,0-0.785-0.116-1.097-0.349 c-0.312-0.232-0.569-0.546-0.774-0.943s-0.357-0.864-0.459-1.403c-0.102-0.538-0.153-1.107-0.153-1.708 c0-0.612,0.051-1.187,0.153-1.726C14.82,29.718,14.973,29.251,15.177,28.854z">
                      </path>
                      <polygon
                        points="32.007,35.62 31.956,35.62 29.95,25.964 27.672,25.964 30.613,38 33.197,38 36.189,25.964 34.013,25.964 ">
                      </polygon>
                    </g>
                  </g>
                </g>
              </svg>
            </button>
          </div>



          <div class="flex w-full justify-end gap-2">
            <!-- Campo de búsqueda -->
            <input type="text" id="input-busqueda-cliente" placeholder="Buscar por nombre, documento, teléfono o email"
              class="border border-gray-300 bg-white rounded px-4 py-2 w-full md:w-1/2"
              oninput="window.clienteFilter.setTexto(this.value)" />

            <!-- Botón para abrir sección de filtros -->
            <button onclick="abrirModalFiltrosCliente()" class="bg-blue-600  p-2 rounded hover:bg-blue-700"
              title="Abrir Filtros">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" class="size-6">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M3 4.6C3 4.03995 3 3.75992 3.10899 3.54601C3.20487 3.35785 3.35785 3.20487 3.54601 3.10899C3.75992 3 4.03995 3 4.6 3H19.4C19.9601 3 20.2401 3 20.454 3.10899C20.6422 3.20487 20.7951 3.35785 20.891 3.54601C21 3.75992 21 4.03995 21 4.6V6.33726C21 6.58185 21 6.70414 20.9724 6.81923C20.9479 6.92127 20.9075 7.01881 20.8526 7.10828C20.7908 7.2092 20.7043 7.29568 20.5314 7.46863L14.4686 13.5314C14.2957 13.7043 14.2092 13.7908 14.1474 13.8917C14.0925 13.9812 14.0521 14.0787 14.0276 14.1808C14 14.2959 14 14.4182 14 14.6627V17L10 21V14.6627C10 14.4182 10 14.2959 9.97237 14.1808C9.94787 14.0787 9.90747 13.9812 9.85264 13.8917C9.7908 13.7908 9.70432 13.7043 9.53137 13.5314L3.46863 7.46863C3.29568 7.29568 3.2092 7.2092 3.14736 7.10828C3.09253 7.01881 3.05213 6.92127 3.02763 6.81923C3 6.70414 3 6.58185 3 6.33726V4.6Z"
                    stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </g>
              </svg>
            </button>
            <!-- Botón para remover filtros -->
            <button id="btn-remover-filtros-cliente" onclick="window.clienteFilter.resetFilters(); renderClientes();"
              class="bg-red-500 p-2 rounded hover:bg-red-400 hidden" title="Remover filtros">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" class="size-6">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M15 15L21 21M21 15L15 21M10 21V14.6627C10 14.4182 10 14.2959 9.97237 14.1808C9.94787 14.0787 9.90747 13.9812 9.85264 13.8917C9.7908 13.7908 9.70432 13.7043 9.53137 13.5314L3.46863 7.46863C3.29568 7.29568 3.2092 7.2092 3.14736 7.10828C3.09253 7.01881 3.05213 6.92127 3.02763 6.81923C3 6.70414 3 6.58185 3 6.33726V4.6C3 4.03995 3 3.75992 3.10899 3.54601C3.20487 3.35785 3.35785 3.20487 3.54601 3.10899C3.75992 3 4.03995 3 4.6 3H19.4C19.9601 3 20.2401 3 20.454 3.10899C20.6422 3.20487 20.7951 3.35785 20.891 3.54601C21 3.75992 21 4.03995 21 4.6V6.33726C21 6.58185 21 6.70414 20.9724 6.81923C20.9479 6.92127 20.9075 7.01881 20.8526 7.10828C20.7908 7.2092 20.7043 7.29568 20.5314 7.46863L17 11"
                    stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </g>
              </svg>
            </button>
          </div>


        </div>

        <div id="tabla-clientes" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto">
          <!-- Tabla responsiva generada dinámicamente -->
        </div>
      </section>

      <!-- Ingresos -->
      <section id="ingresos" class="hidden space-y-4">

        <div class="flex justify-between sm:items-center flex-col sm:flex-row ">
          <h2 class="text-xl md:text-2xl font-bold">Gestión de Ingresos</h2>

          <div class="flex gap-4 items-center mt-3 sm:mt-0">
            <button id="nuevo-ingreso-btn"
              class="bg-[#f8a703] hover:bg-yellow-300 text-white justify-center px-4 py-2 gap-2 flex items-center rounded w-full sm:w-auto font-bold ">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
              </svg>
              Nuevo Ingreso
            </button>

            <div class="flex items-center space-x-4">
              <input type="file" id="input-csv-ingresos" accept=".csv" class="hidden">
              <button id="importar-ingreso-btn" title="Importar CSV de ingresos"
                class="bg-[#34898d] font-bold text-white p-2 rounded shadow-lg hover:bg-blue-400 transition duration-200">
                <svg fill="#ffffff" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"
                  class="size-6">
                  <g id="SVGRepo_bgCarrier" stroke-width="2"></g>
                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                  <g id="SVGRepo_iconCarrier">
                    <path
                      d="m807.186 686.592 272.864 272.864H0v112.94h1080.05l-272.864 272.978 79.736 79.849 409.296-409.183-409.296-409.184-79.736 79.736ZM1870.419 434.69l-329.221-329.11C1509.688 74.07 1465.979 56 1421.48 56H451.773v730.612h112.94V168.941h790.584v451.762h451.762v1129.405H564.714v-508.233h-112.94v621.173H1920V554.52c0-45.176-17.619-87.754-49.58-119.83Zm-402.181-242.37 315.443 315.442h-315.443V192.319Z"
                      fill-rule="evenodd"></path>
                  </g>
                </svg> </button>
              </button>
            </div>

          </div>
        </div>




        <!-- 🔍 Barra de control de tabla -->

        <div class="flex items-center justify-between mb-4 flex-col sm:flex-row sm:gap-1">
          <div class="flex items-center gap-1">
          
            <!-- Select de ordenamiento -->
            <select id="select-orden-ingreso"
              class="border border-gray-300 mb-3 sm:mb-0 bg-white rounded px-3 py-2 w-full sm:w-auto"
              onchange="window.ingresoFilter.setOrden(this.value)">
              <option value="fecha">Fecha de Registro</option>
              <option value="nombre">Nombre Cliente (A-Z)</option>
              <option value="mayorImporte">Mayor Importe</option>
              <option value="menorImporte">Menor Importe</option>
            </select>
            <!-- Para exportar CSV -->
            <button title="Exportar CSV de Ingresos" onclick="prepareTransaccionTableForExportCSV('ingresosCSV', 'tabla-general-ingresos')"
              class="bg-green-600 text-white p-2 rounded hover:bg-green-700">
                                  <svg fill="#ffffff" class="size-6" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48" xml:space="preserve" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M47.987,21.938c-0.006-0.091-0.023-0.178-0.053-0.264c-0.011-0.032-0.019-0.063-0.033-0.094 c-0.048-0.104-0.109-0.202-0.193-0.285c-0.001-0.001-0.001-0.001-0.001-0.001L42,15.586V10c0-0.022-0.011-0.041-0.013-0.063 c-0.006-0.088-0.023-0.173-0.051-0.257c-0.011-0.032-0.019-0.063-0.034-0.094c-0.049-0.106-0.11-0.207-0.196-0.293l-9-9 c-0.086-0.086-0.187-0.148-0.294-0.196c-0.03-0.014-0.06-0.022-0.091-0.032c-0.085-0.03-0.172-0.047-0.263-0.052 C32.039,0.01,32.021,0,32,0H7C6.448,0,6,0.448,6,1v14.586l-5.707,5.707c0,0-0.001,0.001-0.002,0.002 c-0.084,0.084-0.144,0.182-0.192,0.285c-0.014,0.031-0.022,0.062-0.033,0.094c-0.03,0.086-0.048,0.173-0.053,0.264 C0.011,21.96,0,21.978,0,22v19c0,0.552,0.448,1,1,1h5v5c0,0.552,0.448,1,1,1h34c0.552,0,1-0.448,1-1v-5h5c0.552,0,1-0.448,1-1V22 C48,21.978,47.989,21.96,47.987,21.938z M44.586,21H42v-2.586L44.586,21z M38.586,9H33V3.414L38.586,9z M8,2h23v8 c0,0.552,0.448,1,1,1h8v5v5H8v-5V2z M6,18.414V21H3.414L6,18.414z M40,46H8v-4h32V46z M46,40H2V23h5h34h5V40z"></path> <path d="M23.422,27.885c0.147-0.136,0.312-0.235,0.493-0.298c0.181-0.062,0.368-0.093,0.561-0.093 c0.669,0,1.224,0.266,1.666,0.799l1.122-1.462c-0.329-0.385-0.734-0.677-1.215-0.876c-0.482-0.198-1.028-0.297-1.64-0.297 c-0.419,0-0.833,0.071-1.241,0.212c-0.408,0.142-0.774,0.36-1.097,0.655c-0.323,0.295-0.584,0.666-0.782,1.113 c-0.198,0.448-0.298,0.984-0.298,1.607c0,0.499,0.065,0.926,0.195,1.283c0.13,0.358,0.306,0.669,0.527,0.935 c0.221,0.267,0.476,0.496,0.765,0.689c0.289,0.193,0.598,0.368,0.927,0.527c0.521,0.261,0.952,0.544,1.292,0.85 c0.34,0.306,0.51,0.72,0.51,1.241c0,0.533-0.142,0.946-0.425,1.241s-0.64,0.442-1.071,0.442c-0.385,0-0.762-0.091-1.131-0.272 s-0.683-0.431-0.944-0.748l-1.105,1.496c0.34,0.397,0.793,0.725,1.36,0.986c0.567,0.261,1.184,0.391,1.853,0.391 c0.465,0,0.907-0.079,1.326-0.238c0.419-0.159,0.785-0.394,1.097-0.706c0.312-0.311,0.561-0.694,0.748-1.147 c0.187-0.453,0.281-0.975,0.281-1.564c0-0.51-0.079-0.952-0.238-1.326c-0.159-0.374-0.363-0.697-0.612-0.969 c-0.249-0.272-0.527-0.504-0.833-0.697c-0.306-0.193-0.606-0.363-0.901-0.51c-0.499-0.249-0.901-0.513-1.207-0.791 c-0.306-0.277-0.459-0.671-0.459-1.181c0-0.295,0.042-0.55,0.128-0.765C23.159,28.197,23.275,28.021,23.422,27.885z"></path> <path d="M15.177,28.854c0.204-0.397,0.459-0.711,0.765-0.944c0.306-0.232,0.663-0.348,1.071-0.348 c0.737,0,1.337,0.334,1.802,1.003l1.173-1.428c-0.329-0.476-0.754-0.841-1.275-1.097c-0.521-0.255-1.128-0.382-1.819-0.382 c-0.669,0-1.278,0.156-1.828,0.467c-0.55,0.312-1.017,0.748-1.403,1.309c-0.385,0.562-0.683,1.23-0.892,2.006 c-0.21,0.777-0.314,1.624-0.314,2.542c0,0.918,0.105,1.762,0.314,2.533s0.504,1.436,0.884,1.997 c0.38,0.562,0.844,1.001,1.394,1.318s1.165,0.476,1.845,0.476c0.748,0,1.368-0.147,1.861-0.442s0.898-0.68,1.215-1.156 l-1.173-1.377c-0.193,0.295-0.434,0.544-0.722,0.748s-0.632,0.306-1.028,0.306c-0.419,0-0.785-0.116-1.097-0.349 c-0.312-0.232-0.569-0.546-0.774-0.943s-0.357-0.864-0.459-1.403c-0.102-0.538-0.153-1.107-0.153-1.708 c0-0.612,0.051-1.187,0.153-1.726C14.82,29.718,14.973,29.251,15.177,28.854z"></path> <polygon points="32.007,35.62 31.956,35.62 29.95,25.964 27.672,25.964 30.613,38 33.197,38 36.189,25.964 34.013,25.964 "></polygon> </g> </g> </g></svg>
            </button>
          </div>


          <div class="flex w-full justify-end gap-2">
            <!-- Campo de búsqueda -->
            <input type="text" id="input-busqueda-transaccion" placeholder="Buscar por nombre de cliente o banco"
              class="border border-gray-300 bg-white rounded px-4 py-2 w-full md:w-1/2"
              oninput="window.ingresoFilter.setTexto(this.value)" />



            <!-- Botón abrir filtros -->
            <button onclick="abrirModalFiltrosIngreso()" title="Abrir Filtros"
              class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" class="size-6">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M3 4.6C3 4.03995 3 3.75992 3.10899 3.54601C3.20487 3.35785 3.35785 3.20487 3.54601 3.10899C3.75992 3 4.03995 3 4.6 3H19.4C19.9601 3 20.2401 3 20.454 3.10899C20.6422 3.20487 20.7951 3.35785 20.891 3.54601C21 3.75992 21 4.03995 21 4.6V6.33726C21 6.58185 21 6.70414 20.9724 6.81923C20.9479 6.92127 20.9075 7.01881 20.8526 7.10828C20.7908 7.2092 20.7043 7.29568 20.5314 7.46863L14.4686 13.5314C14.2957 13.7043 14.2092 13.7908 14.1474 13.8917C14.0925 13.9812 14.0521 14.0787 14.0276 14.1808C14 14.2959 14 14.4182 14 14.6627V17L10 21V14.6627C10 14.4182 10 14.2959 9.97237 14.1808C9.94787 14.0787 9.90747 13.9812 9.85264 13.8917C9.7908 13.7908 9.70432 13.7043 9.53137 13.5314L3.46863 7.46863C3.29568 7.29568 3.2092 7.2092 3.14736 7.10828C3.09253 7.01881 3.05213 6.92127 3.02763 6.81923C3 6.70414 3 6.58185 3 6.33726V4.6Z"
                    stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </g>
              </svg>
            </button>

            <!-- Botón remover filtros -->
            <button id="btn-remover-filtros-ingreso" title="Remover filtros"
              onclick="window.ingresoFilter.resetFilters(); renderIngresos();"
              class="bg-red-500 p-2 rounded hover:bg-red-400 hidden">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" class="size-6">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M15 15L21 21M21 15L15 21M10 21V14.6627C10 14.4182 10 14.2959 9.97237 14.1808C9.94787 14.0787 9.90747 13.9812 9.85264 13.8917C9.7908 13.7908 9.70432 13.7043 9.53137 13.5314L3.46863 7.46863C3.29568 7.29568 3.2092 7.2092 3.14736 7.10828C3.09253 7.01881 3.05213 6.92127 3.02763 6.81923C3 6.70414 3 6.58185 3 6.33726V4.6C3 4.03995 3 3.75992 3.10899 3.54601C3.20487 3.35785 3.35785 3.20487 3.54601 3.10899C3.75992 3 4.03995 3 4.6 3H19.4C19.9601 3 20.2401 3 20.454 3.10899C20.6422 3.20487 20.7951 3.35785 20.891 3.54601C21 3.75992 21 4.03995 21 4.6V6.33726C21 6.58185 21 6.70414 20.9724 6.81923C20.9479 6.92127 20.9075 7.01881 20.8526 7.10828C20.7908 7.2092 20.7043 7.29568 20.5314 7.46863L17 11"
                    stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </g>
              </svg>
            </button>
          </div>


        </div>

        <div id="tabla-ingresos" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto">
          <!-- Tabla responsiva generada dinámicamente -->
        </div>


      </section>


      <!-- Egresos -->
      <section id="egresos" class="hidden space-y-4">

        <div class="flex justify-between sm:items-center flex-col sm:flex-row ">
          <h2 class="text-xl md:text-2xl font-bold">Gestión de Egresos</h2>

          <div class="flex gap-4 items-center mt-3 sm:mt-0">

            <button id="nuevo-egreso-btn"
              class="bg-[#f8a703] hover:bg-yellow-300 text-white justify-center px-4 py-2 gap-2 flex items-center rounded w-full sm:w-auto font-bold ">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
              </svg>
              Nuevo Egreso
            </button>

            <div class="flex items-center space-x-4">
              <input type="file" id="input-csv-egresos" accept=".csv" class="hidden">
              <button id="importar-egreso-btn" title="Importar CSV de egresos"
                class="bg-[#34898d] font-bold text-white p-2 rounded shadow-lg hover:bg-blue-400 transition duration-200">
                <svg fill="#ffffff" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"
                  class="size-6">
                  <g id="SVGRepo_bgCarrier" stroke-width="2"></g>
                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                  <g id="SVGRepo_iconCarrier">
                    <path
                      d="m807.186 686.592 272.864 272.864H0v112.94h1080.05l-272.864 272.978 79.736 79.849 409.296-409.183-409.296-409.184-79.736 79.736ZM1870.419 434.69l-329.221-329.11C1509.688 74.07 1465.979 56 1421.48 56H451.773v730.612h112.94V168.941h790.584v451.762h451.762v1129.405H564.714v-508.233h-112.94v621.173H1920V554.52c0-45.176-17.619-87.754-49.58-119.83Zm-402.181-242.37 315.443 315.442h-315.443V192.319Z"
                      fill-rule="evenodd"></path>
                  </g>
                </svg>
              </button>
            </div>

          </div>


        </div>





        <!-- 🔍 Barra de control de ingresos/egresos -->
        <div class="flex items-center justify-between mb-4 flex-col sm:flex-row sm:gap-1">
        
          <div class="flex items-center gap-1">
            <!-- Select de ordenamiento -->
            <select id="select-orden-egreso"
              class="border border-gray-300 mb-3 sm:mb-0 bg-white rounded px-3 py-2 w-full sm:w-auto"
              onchange="window.egresoFilter.setOrden(this.value)">
              <option value="fecha">Fecha de Registro</option>
              <option value="nombre">Nombre Cliente (A-Z)</option>
              <option value="mayorImporte">Mayor Importe</option>
              <option value="menorImporte">Menor Importe</option>
            </select>
            <button title="Exportar CSV Egresos" onclick="prepareTransaccionTableForExportCSV('egresosCSV', 'tabla-general-egresos')"
            class="bg-green-600 text-white p-2 rounded hover:bg-green-700">
                <svg fill="#ffffff" class="size-6" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48" xml:space="preserve" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M47.987,21.938c-0.006-0.091-0.023-0.178-0.053-0.264c-0.011-0.032-0.019-0.063-0.033-0.094 c-0.048-0.104-0.109-0.202-0.193-0.285c-0.001-0.001-0.001-0.001-0.001-0.001L42,15.586V10c0-0.022-0.011-0.041-0.013-0.063 c-0.006-0.088-0.023-0.173-0.051-0.257c-0.011-0.032-0.019-0.063-0.034-0.094c-0.049-0.106-0.11-0.207-0.196-0.293l-9-9 c-0.086-0.086-0.187-0.148-0.294-0.196c-0.03-0.014-0.06-0.022-0.091-0.032c-0.085-0.03-0.172-0.047-0.263-0.052 C32.039,0.01,32.021,0,32,0H7C6.448,0,6,0.448,6,1v14.586l-5.707,5.707c0,0-0.001,0.001-0.002,0.002 c-0.084,0.084-0.144,0.182-0.192,0.285c-0.014,0.031-0.022,0.062-0.033,0.094c-0.03,0.086-0.048,0.173-0.053,0.264 C0.011,21.96,0,21.978,0,22v19c0,0.552,0.448,1,1,1h5v5c0,0.552,0.448,1,1,1h34c0.552,0,1-0.448,1-1v-5h5c0.552,0,1-0.448,1-1V22 C48,21.978,47.989,21.96,47.987,21.938z M44.586,21H42v-2.586L44.586,21z M38.586,9H33V3.414L38.586,9z M8,2h23v8 c0,0.552,0.448,1,1,1h8v5v5H8v-5V2z M6,18.414V21H3.414L6,18.414z M40,46H8v-4h32V46z M46,40H2V23h5h34h5V40z"></path> <path d="M23.422,27.885c0.147-0.136,0.312-0.235,0.493-0.298c0.181-0.062,0.368-0.093,0.561-0.093 c0.669,0,1.224,0.266,1.666,0.799l1.122-1.462c-0.329-0.385-0.734-0.677-1.215-0.876c-0.482-0.198-1.028-0.297-1.64-0.297 c-0.419,0-0.833,0.071-1.241,0.212c-0.408,0.142-0.774,0.36-1.097,0.655c-0.323,0.295-0.584,0.666-0.782,1.113 c-0.198,0.448-0.298,0.984-0.298,1.607c0,0.499,0.065,0.926,0.195,1.283c0.13,0.358,0.306,0.669,0.527,0.935 c0.221,0.267,0.476,0.496,0.765,0.689c0.289,0.193,0.598,0.368,0.927,0.527c0.521,0.261,0.952,0.544,1.292,0.85 c0.34,0.306,0.51,0.72,0.51,1.241c0,0.533-0.142,0.946-0.425,1.241s-0.64,0.442-1.071,0.442c-0.385,0-0.762-0.091-1.131-0.272 s-0.683-0.431-0.944-0.748l-1.105,1.496c0.34,0.397,0.793,0.725,1.36,0.986c0.567,0.261,1.184,0.391,1.853,0.391 c0.465,0,0.907-0.079,1.326-0.238c0.419-0.159,0.785-0.394,1.097-0.706c0.312-0.311,0.561-0.694,0.748-1.147 c0.187-0.453,0.281-0.975,0.281-1.564c0-0.51-0.079-0.952-0.238-1.326c-0.159-0.374-0.363-0.697-0.612-0.969 c-0.249-0.272-0.527-0.504-0.833-0.697c-0.306-0.193-0.606-0.363-0.901-0.51c-0.499-0.249-0.901-0.513-1.207-0.791 c-0.306-0.277-0.459-0.671-0.459-1.181c0-0.295,0.042-0.55,0.128-0.765C23.159,28.197,23.275,28.021,23.422,27.885z"></path> <path d="M15.177,28.854c0.204-0.397,0.459-0.711,0.765-0.944c0.306-0.232,0.663-0.348,1.071-0.348 c0.737,0,1.337,0.334,1.802,1.003l1.173-1.428c-0.329-0.476-0.754-0.841-1.275-1.097c-0.521-0.255-1.128-0.382-1.819-0.382 c-0.669,0-1.278,0.156-1.828,0.467c-0.55,0.312-1.017,0.748-1.403,1.309c-0.385,0.562-0.683,1.23-0.892,2.006 c-0.21,0.777-0.314,1.624-0.314,2.542c0,0.918,0.105,1.762,0.314,2.533s0.504,1.436,0.884,1.997 c0.38,0.562,0.844,1.001,1.394,1.318s1.165,0.476,1.845,0.476c0.748,0,1.368-0.147,1.861-0.442s0.898-0.68,1.215-1.156 l-1.173-1.377c-0.193,0.295-0.434,0.544-0.722,0.748s-0.632,0.306-1.028,0.306c-0.419,0-0.785-0.116-1.097-0.349 c-0.312-0.232-0.569-0.546-0.774-0.943s-0.357-0.864-0.459-1.403c-0.102-0.538-0.153-1.107-0.153-1.708 c0-0.612,0.051-1.187,0.153-1.726C14.82,29.718,14.973,29.251,15.177,28.854z"></path> <polygon points="32.007,35.62 31.956,35.62 29.95,25.964 27.672,25.964 30.613,38 33.197,38 36.189,25.964 34.013,25.964 "></polygon> </g> </g> </g></svg>
          </button>

          </div>


          <div class="flex w-full justify-end gap-2">
            <!-- Campo de búsqueda -->
            <input type="text" id="input-busqueda-egreso" placeholder="Buscar por nombre de cliente o banco"
              class="border border-gray-300 bg-white rounded px-4 py-2 w-full md:w-1/2"
              oninput="window.egresoFilter.setTexto(this.value)" />


            <!-- Botón abrir filtros -->
            <button onclick="abrirModalFiltrosEgreso()" title="Abrir Filtros"
              class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" class="size-6">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M3 4.6C3 4.03995 3 3.75992 3.10899 3.54601C3.20487 3.35785 3.35785 3.20487 3.54601 3.10899C3.75992 3 4.03995 3 4.6 3H19.4C19.9601 3 20.2401 3 20.454 3.10899C20.6422 3.20487 20.7951 3.35785 20.891 3.54601C21 3.75992 21 4.03995 21 4.6V6.33726C21 6.58185 21 6.70414 20.9724 6.81923C20.9479 6.92127 20.9075 7.01881 20.8526 7.10828C20.7908 7.2092 20.7043 7.29568 20.5314 7.46863L14.4686 13.5314C14.2957 13.7043 14.2092 13.7908 14.1474 13.8917C14.0925 13.9812 14.0521 14.0787 14.0276 14.1808C14 14.2959 14 14.4182 14 14.6627V17L10 21V14.6627C10 14.4182 10 14.2959 9.97237 14.1808C9.94787 14.0787 9.90747 13.9812 9.85264 13.8917C9.7908 13.7908 9.70432 13.7043 9.53137 13.5314L3.46863 7.46863C3.29568 7.29568 3.2092 7.2092 3.14736 7.10828C3.09253 7.01881 3.05213 6.92127 3.02763 6.81923C3 6.70414 3 6.58185 3 6.33726V4.6Z"
                    stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </g>
              </svg>
            </button>

            <!-- Botón remover filtros -->
            <button id="btn-remover-filtros-egreso" onclick="window.egresoFilter.resetFilters(); renderEgresos();"
              class="bg-red-500 p-2 rounded hover:bg-red-400 hidden">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff" class="size-6">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    d="M15 15L21 21M21 15L15 21M10 21V14.6627C10 14.4182 10 14.2959 9.97237 14.1808C9.94787 14.0787 9.90747 13.9812 9.85264 13.8917C9.7908 13.7908 9.70432 13.7043 9.53137 13.5314L3.46863 7.46863C3.29568 7.29568 3.2092 7.2092 3.14736 7.10828C3.09253 7.01881 3.05213 6.92127 3.02763 6.81923C3 6.70414 3 6.58185 3 6.33726V4.6C3 4.03995 3 3.75992 3.10899 3.54601C3.20487 3.35785 3.35785 3.20487 3.54601 3.10899C3.75992 3 4.03995 3 4.6 3H19.4C19.9601 3 20.2401 3 20.454 3.10899C20.6422 3.20487 20.7951 3.35785 20.891 3.54601C21 3.75992 21 4.03995 21 4.6V6.33726C21 6.58185 21 6.70414 20.9724 6.81923C20.9479 6.92127 20.9075 7.01881 20.8526 7.10828C20.7908 7.2092 20.7043 7.29568 20.5314 7.46863L17 11"
                    stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </g>
              </svg>
            </button>
          </div>

        </div>

        <div id="tabla-egresos" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto">
          <!-- Tabla responsiva generada dinámicamente -->
        </div>
      </section>

      <!-- Reportes -->
      <!--section id="reportes" class="hidden space-y-4">
        <h2 class="text-xl md:text-2xl font-bold">Reportes por Cliente</h2>
        <form id="form-reporte" class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <select id="reporte-cliente" class="p-2 border rounded w-full" required>
            <option value="">Seleccione un cliente</option>
          </select>
          <input type="date" id="fecha-inicio" class="p-2 border rounded w-full" />
          <div class="md:col-span-3 space-y-2 sm:space-y-0">
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded w-full sm:w-auto">Generar
              Reporte</button>
          </div>
        </form>
        <div id="resultado-reporte" class="bg-white p-4 rounded shadow mt-4 overflow-x-auto"></div>
      </!--section-->





      <section id="detalle-cliente" class="space-y-4 hidden">

        <div class="flex justify-between sm:items-center flex-col sm:flex-row">
          <h2 class="text-xl md:text-2xl font-bold">Detalle del Cliente</h2>
          <div class="flex items-center justify-end gap-3 grow mt-6 sm:mt-0">
            <label for="cliente-select" class="text-lg font-bold text-gray-700">Cliente</label>
            <!-- Select normal -->
            <select id="cliente-detalle-select" onchange="cargarDetalleCliente(this.value)"
              class="border border-gray-300 bg-white rounded px-4 py-2 w-full md:w-1/2">
              <!-- Opciones dinámicas generadas en JS -->
            </select>
            <!-- Botón buscar cliente -->
            <button onclick="searchDetalleCliente()"
              class="bg-[#f8a703] hover:bg-yellow-300 text-white rounded p-2 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="white"
                class="size-6">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
              </svg>
            </button>
          </div>
        </div>


        <div id="content-detalle-cliente" class="hidden space-y-4 ">
          <div class="flex flex-col sm:flex-row gap-4">
            <div class="flex gap-2 flex-col w-full sm:w-1/2">
              <div id="info-cliente-detalle" class="w-full h-full">
                <!-- Opciones dinámicas generadas en JS -->
              </div>

              <div id="botones-cliente-detalle" class="grid grid-cols-1 md:grid-cols-2  gap-1 sm:gap-2  w-full">
              </div>
            </div>

            <!-- Cards informativas de cliente -->
            <div id="cards-cliente-detalle" class="grid grid-cols-1 md:grid-cols-2  gap-2 sm:gap-3 w-full sm:w-1/2"">
                <!-- Aquí se inyectarán dinámicamente las tarjetas -->
            </div>  
  
          </div>
  
  
          <hr class=" border-gray-200 my-5 border">




              <div class="flex items-center justify-start sm:justify-between mb-4 flex-col sm:flex-row sm:gap-1 ">
                <h3 class="text-xl md:text-xl font-semibold">Ingresos del Cliente</h3>
                <div class="flex items-center gap-1">
                  <!-- Para exportar CSV -->
                  <button title="Exportar Ingresos del Cliente"
                    onclick="prepareTransaccionDetalleTableForExportCSV('ingresosClienteCSV', 'tabla-cliente-ingresos')"
                    class="bg-green-600 text-white p-2 rounded hover:bg-green-700">
                    <svg fill="#ffffff" class="size-6" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48" xml:space="preserve" stroke="#ffffff">
                      <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                      <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                      <g id="SVGRepo_iconCarrier">
                        <g>
                          <g>
                            <path
                              d="M47.987,21.938c-0.006-0.091-0.023-0.178-0.053-0.264c-0.011-0.032-0.019-0.063-0.033-0.094 c-0.048-0.104-0.109-0.202-0.193-0.285c-0.001-0.001-0.001-0.001-0.001-0.001L42,15.586V10c0-0.022-0.011-0.041-0.013-0.063 c-0.006-0.088-0.023-0.173-0.051-0.257c-0.011-0.032-0.019-0.063-0.034-0.094c-0.049-0.106-0.11-0.207-0.196-0.293l-9-9 c-0.086-0.086-0.187-0.148-0.294-0.196c-0.03-0.014-0.06-0.022-0.091-0.032c-0.085-0.03-0.172-0.047-0.263-0.052 C32.039,0.01,32.021,0,32,0H7C6.448,0,6,0.448,6,1v14.586l-5.707,5.707c0,0-0.001,0.001-0.002,0.002 c-0.084,0.084-0.144,0.182-0.192,0.285c-0.014,0.031-0.022,0.062-0.033,0.094c-0.03,0.086-0.048,0.173-0.053,0.264 C0.011,21.96,0,21.978,0,22v19c0,0.552,0.448,1,1,1h5v5c0,0.552,0.448,1,1,1h34c0.552,0,1-0.448,1-1v-5h5c0.552,0,1-0.448,1-1V22 C48,21.978,47.989,21.96,47.987,21.938z M44.586,21H42v-2.586L44.586,21z M38.586,9H33V3.414L38.586,9z M8,2h23v8 c0,0.552,0.448,1,1,1h8v5v5H8v-5V2z M6,18.414V21H3.414L6,18.414z M40,46H8v-4h32V46z M46,40H2V23h5h34h5V40z">
                            </path>
                            <path
                              d="M23.422,27.885c0.147-0.136,0.312-0.235,0.493-0.298c0.181-0.062,0.368-0.093,0.561-0.093 c0.669,0,1.224,0.266,1.666,0.799l1.122-1.462c-0.329-0.385-0.734-0.677-1.215-0.876c-0.482-0.198-1.028-0.297-1.64-0.297 c-0.419,0-0.833,0.071-1.241,0.212c-0.408,0.142-0.774,0.36-1.097,0.655c-0.323,0.295-0.584,0.666-0.782,1.113 c-0.198,0.448-0.298,0.984-0.298,1.607c0,0.499,0.065,0.926,0.195,1.283c0.13,0.358,0.306,0.669,0.527,0.935 c0.221,0.267,0.476,0.496,0.765,0.689c0.289,0.193,0.598,0.368,0.927,0.527c0.521,0.261,0.952,0.544,1.292,0.85 c0.34,0.306,0.51,0.72,0.51,1.241c0,0.533-0.142,0.946-0.425,1.241s-0.64,0.442-1.071,0.442c-0.385,0-0.762-0.091-1.131-0.272 s-0.683-0.431-0.944-0.748l-1.105,1.496c0.34,0.397,0.793,0.725,1.36,0.986c0.567,0.261,1.184,0.391,1.853,0.391 c0.465,0,0.907-0.079,1.326-0.238c0.419-0.159,0.785-0.394,1.097-0.706c0.312-0.311,0.561-0.694,0.748-1.147 c0.187-0.453,0.281-0.975,0.281-1.564c0-0.51-0.079-0.952-0.238-1.326c-0.159-0.374-0.363-0.697-0.612-0.969 c-0.249-0.272-0.527-0.504-0.833-0.697c-0.306-0.193-0.606-0.363-0.901-0.51c-0.499-0.249-0.901-0.513-1.207-0.791 c-0.306-0.277-0.459-0.671-0.459-1.181c0-0.295,0.042-0.55,0.128-0.765C23.159,28.197,23.275,28.021,23.422,27.885z">
                            </path>
                            <path
                              d="M15.177,28.854c0.204-0.397,0.459-0.711,0.765-0.944c0.306-0.232,0.663-0.348,1.071-0.348 c0.737,0,1.337,0.334,1.802,1.003l1.173-1.428c-0.329-0.476-0.754-0.841-1.275-1.097c-0.521-0.255-1.128-0.382-1.819-0.382 c-0.669,0-1.278,0.156-1.828,0.467c-0.55,0.312-1.017,0.748-1.403,1.309c-0.385,0.562-0.683,1.23-0.892,2.006 c-0.21,0.777-0.314,1.624-0.314,2.542c0,0.918,0.105,1.762,0.314,2.533s0.504,1.436,0.884,1.997 c0.38,0.562,0.844,1.001,1.394,1.318s1.165,0.476,1.845,0.476c0.748,0,1.368-0.147,1.861-0.442s0.898-0.68,1.215-1.156 l-1.173-1.377c-0.193,0.295-0.434,0.544-0.722,0.748s-0.632,0.306-1.028,0.306c-0.419,0-0.785-0.116-1.097-0.349 c-0.312-0.232-0.569-0.546-0.774-0.943s-0.357-0.864-0.459-1.403c-0.102-0.538-0.153-1.107-0.153-1.708 c0-0.612,0.051-1.187,0.153-1.726C14.82,29.718,14.973,29.251,15.177,28.854z">
                            </path>
                            <polygon
                              points="32.007,35.62 31.956,35.62 29.95,25.964 27.672,25.964 30.613,38 33.197,38 36.189,25.964 34.013,25.964 ">
                            </polygon>
                          </g>
                        </g>
                      </g>
                    </svg>
                  </button>
                  <select id="select-orden-ingreso-detalle"
                    class="border border-gray-300 mb-3 sm:mb-0 bg-white rounded px-3 py-2 w-full sm:w-auto"
                    onchange="window.ingresoDetalleFilter.setOrden(this.value); renderIngresosCliente();">
                    <option value="fecha">Fecha de Registro</option>
                    <option value="mayorImporte">Mayor Importe</option>
                    <option value="menorImporte">Menor Importe</option>
                  </select>
                </div>

              </div>

              <div class="flex w-full justify-end gap-2 ">
                <!-- Campo de búsqueda -->
                <input type="text" id="input-busqueda-ingreso-detalle" placeholder="Buscar por banco"
                  class="border border-gray-300 bg-white rounded px-4 py-2 w-full"
                  oninput="window.ingresoDetalleFilter.setTexto(this.value)" />

                <!-- Select de ordenamiento -->


                <!-- Botón abrir filtros -->
                <button onclick="abrirModalFiltrosIngresoDetalle()" title="Abrir Filtros"
                  class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"
                    class="size-6">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                      <path
                        d="M3 4.6C3 4.03995 3 3.75992 3.10899 3.54601C3.20487 3.35785 3.35785 3.20487 3.54601 3.10899C3.75992 3 4.03995 3 4.6 3H19.4C19.9601 3 20.2401 3 20.454 3.10899C20.6422 3.20487 20.7951 3.35785 20.891 3.54601C21 3.75992 21 4.03995 21 4.6V6.33726C21 6.58185 21 6.70414 20.9724 6.81923C20.9479 6.92127 20.9075 7.01881 20.8526 7.10828C20.7908 7.2092 20.7043 7.29568 20.5314 7.46863L14.4686 13.5314C14.2957 13.7043 14.2092 13.7908 14.1474 13.8917C14.0925 13.9812 14.0521 14.0787 14.0276 14.1808C14 14.2959 14 14.4182 14 14.6627V17L10 21V14.6627C10 14.4182 10 14.2959 9.97237 14.1808C9.94787 14.0787 9.90747 13.9812 9.85264 13.8917C9.7908 13.7908 9.70432 13.7043 9.53137 13.5314L3.46863 7.46863C3.29568 7.29568 3.2092 7.2092 3.14736 7.10828C3.09253 7.01881 3.05213 6.92127 3.02763 6.81923C3 6.70414 3 6.58185 3 6.33726V4.6Z"
                        stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </g>
                  </svg>
                </button>

                <!-- Botón remover filtros -->
                <button id="btn-remover-filtros-ingreso-detalle" title="Remover filtros"
                  onclick="window.ingresoDetalleFilter.resetFilters(); renderIngresosCliente();"
                  class="bg-red-500 p-2 rounded hover:bg-red-400 hidden">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"
                    class="size-6">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                      <path
                        d="M15 15L21 21M21 15L15 21M10 21V14.6627C10 14.4182 10 14.2959 9.97237 14.1808C9.94787 14.0787 9.90747 13.9812 9.85264 13.8917C9.7908 13.7908 9.70432 13.7043 9.53137 13.5314L3.46863 7.46863C3.29568 7.29568 3.2092 7.2092 3.14736 7.10828C3.09253 7.01881 3.05213 6.92127 3.02763 6.81923C3 6.70414 3 6.58185 3 6.33726V4.6C3 4.03995 3 3.75992 3.10899 3.54601C3.20487 3.35785 3.35785 3.20487 3.54601 3.10899C3.75992 3 4.03995 3 4.6 3H19.4C19.9601 3 20.2401 3 20.454 3.10899C20.6422 3.20487 20.7951 3.35785 20.891 3.54601C21 3.75992 21 4.03995 21 4.6V6.33726C21 6.58185 21 6.70414 20.9724 6.81923C20.9479 6.92127 20.9075 7.01881 20.8526 7.10828C20.7908 7.2092 20.7043 7.29568 20.5314 7.46863L17 11"
                        stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </g>
                  </svg>
                </button>
              </div>






              <div id="tabla-ingresos-detalle-cliente" class="bg-white p-4 rounded shadow mt-1 overflow-x-auto">
                <!-- Aquí se genera dinámicamente la tabla de ingresos del cliente -->
              </div >

              <hr class="border-gray-200 my-5 border">

              <div class="flex sm:items-center justify-between mb-4 flex-col items-start sm:flex-row gap-1">
                <h3 class="text-xl md:text-xl font-semibold ">Egresos del Cliente</h3>
                <div class="flex items-center gap-1">
                  <!-- Para exportar CSV -->
                  <button title="Exportar Egresos del Cliente" onclick="prepareTransaccionDetalleTableForExportCSV('egresosClienteCSV', 'tabla-cliente-egresos')"
                    class="bg-green-600 text-white p-2 rounded hover:bg-green-700">
                    <svg fill="#ffffff" class="size-6" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 48 48" xml:space="preserve" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <g> <path d="M47.987,21.938c-0.006-0.091-0.023-0.178-0.053-0.264c-0.011-0.032-0.019-0.063-0.033-0.094 c-0.048-0.104-0.109-0.202-0.193-0.285c-0.001-0.001-0.001-0.001-0.001-0.001L42,15.586V10c0-0.022-0.011-0.041-0.013-0.063 c-0.006-0.088-0.023-0.173-0.051-0.257c-0.011-0.032-0.019-0.063-0.034-0.094c-0.049-0.106-0.11-0.207-0.196-0.293l-9-9 c-0.086-0.086-0.187-0.148-0.294-0.196c-0.03-0.014-0.06-0.022-0.091-0.032c-0.085-0.03-0.172-0.047-0.263-0.052 C32.039,0.01,32.021,0,32,0H7C6.448,0,6,0.448,6,1v14.586l-5.707,5.707c0,0-0.001,0.001-0.002,0.002 c-0.084,0.084-0.144,0.182-0.192,0.285c-0.014,0.031-0.022,0.062-0.033,0.094c-0.03,0.086-0.048,0.173-0.053,0.264 C0.011,21.96,0,21.978,0,22v19c0,0.552,0.448,1,1,1h5v5c0,0.552,0.448,1,1,1h34c0.552,0,1-0.448,1-1v-5h5c0.552,0,1-0.448,1-1V22 C48,21.978,47.989,21.96,47.987,21.938z M44.586,21H42v-2.586L44.586,21z M38.586,9H33V3.414L38.586,9z M8,2h23v8 c0,0.552,0.448,1,1,1h8v5v5H8v-5V2z M6,18.414V21H3.414L6,18.414z M40,46H8v-4h32V46z M46,40H2V23h5h34h5V40z"></path> <path d="M23.422,27.885c0.147-0.136,0.312-0.235,0.493-0.298c0.181-0.062,0.368-0.093,0.561-0.093 c0.669,0,1.224,0.266,1.666,0.799l1.122-1.462c-0.329-0.385-0.734-0.677-1.215-0.876c-0.482-0.198-1.028-0.297-1.64-0.297 c-0.419,0-0.833,0.071-1.241,0.212c-0.408,0.142-0.774,0.36-1.097,0.655c-0.323,0.295-0.584,0.666-0.782,1.113 c-0.198,0.448-0.298,0.984-0.298,1.607c0,0.499,0.065,0.926,0.195,1.283c0.13,0.358,0.306,0.669,0.527,0.935 c0.221,0.267,0.476,0.496,0.765,0.689c0.289,0.193,0.598,0.368,0.927,0.527c0.521,0.261,0.952,0.544,1.292,0.85 c0.34,0.306,0.51,0.72,0.51,1.241c0,0.533-0.142,0.946-0.425,1.241s-0.64,0.442-1.071,0.442c-0.385,0-0.762-0.091-1.131-0.272 s-0.683-0.431-0.944-0.748l-1.105,1.496c0.34,0.397,0.793,0.725,1.36,0.986c0.567,0.261,1.184,0.391,1.853,0.391 c0.465,0,0.907-0.079,1.326-0.238c0.419-0.159,0.785-0.394,1.097-0.706c0.312-0.311,0.561-0.694,0.748-1.147 c0.187-0.453,0.281-0.975,0.281-1.564c0-0.51-0.079-0.952-0.238-1.326c-0.159-0.374-0.363-0.697-0.612-0.969 c-0.249-0.272-0.527-0.504-0.833-0.697c-0.306-0.193-0.606-0.363-0.901-0.51c-0.499-0.249-0.901-0.513-1.207-0.791 c-0.306-0.277-0.459-0.671-0.459-1.181c0-0.295,0.042-0.55,0.128-0.765C23.159,28.197,23.275,28.021,23.422,27.885z"></path> <path d="M15.177,28.854c0.204-0.397,0.459-0.711,0.765-0.944c0.306-0.232,0.663-0.348,1.071-0.348 c0.737,0,1.337,0.334,1.802,1.003l1.173-1.428c-0.329-0.476-0.754-0.841-1.275-1.097c-0.521-0.255-1.128-0.382-1.819-0.382 c-0.669,0-1.278,0.156-1.828,0.467c-0.55,0.312-1.017,0.748-1.403,1.309c-0.385,0.562-0.683,1.23-0.892,2.006 c-0.21,0.777-0.314,1.624-0.314,2.542c0,0.918,0.105,1.762,0.314,2.533s0.504,1.436,0.884,1.997 c0.38,0.562,0.844,1.001,1.394,1.318s1.165,0.476,1.845,0.476c0.748,0,1.368-0.147,1.861-0.442s0.898-0.68,1.215-1.156 l-1.173-1.377c-0.193,0.295-0.434,0.544-0.722,0.748s-0.632,0.306-1.028,0.306c-0.419,0-0.785-0.116-1.097-0.349 c-0.312-0.232-0.569-0.546-0.774-0.943s-0.357-0.864-0.459-1.403c-0.102-0.538-0.153-1.107-0.153-1.708 c0-0.612,0.051-1.187,0.153-1.726C14.82,29.718,14.973,29.251,15.177,28.854z"></path> <polygon points="32.007,35.62 31.956,35.62 29.95,25.964 27.672,25.964 30.613,38 33.197,38 36.189,25.964 34.013,25.964 "></polygon> </g> </g> </g></svg>
                  </button>
                  <!-- Select de ordenamiento -->
                  <select id="select-orden-egreso-detalle"
                    class="border border-gray-300 mb-3 sm:mb-0 bg-white rounded px-3 py-2 w-full sm:w-auto"
                    onchange="window.egresoDetalleFilter.setOrden(this.value);">
                    <option value="fecha">Fecha de Registro</option>
                    <option value="mayorImporte">Mayor Importe</option>
                    <option value="menorImporte">Menor Importe</option>
                  </select>
                
                </div>

              </div>
              <div class="flex w-full justify-end gap-2">
                <!-- Campo de búsqueda -->
                <input type="text" id="input-busqueda-egreso-detalle" placeholder="Buscar por banco"
                  class="border border-gray-300 rounded bg-white px-4 py-2 w-full "
                  oninput="window.egresoDetalleFilter.setTexto(this.value);" />



                <!-- Botón abrir filtros -->
                <button onclick="abrirModalFiltrosEgresoDetalle()" title="Abrir Filtros"
                  class="bg-blue-600 text-white p-2 rounded hover:bg-blue-700">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"
                    class="size-6">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                      <path
                        d="M3 4.6C3 4.03995 3 3.75992 3.10899 3.54601C3.20487 3.35785 3.35785 3.20487 3.54601 3.10899C3.75992 3 4.03995 3 4.6 3H19.4C19.9601 3 20.2401 3 20.454 3.10899C20.6422 3.20487 20.7951 3.35785 20.891 3.54601C21 3.75992 21 4.03995 21 4.6V6.33726C21 6.58185 21 6.70414 20.9724 6.81923C20.9479 6.92127 20.9075 7.01881 20.8526 7.10828C20.7908 7.2092 20.7043 7.29568 20.5314 7.46863L14.4686 13.5314C14.2957 13.7043 14.2092 13.7908 14.1474 13.8917C14.0925 13.9812 14.0521 14.0787 14.0276 14.1808C14 14.2959 14 14.4182 14 14.6627V17L10 21V14.6627C10 14.4182 10 14.2959 9.97237 14.1808C9.94787 14.0787 9.90747 13.9812 9.85264 13.8917C9.7908 13.7908 9.70432 13.7043 9.53137 13.5314L3.46863 7.46863C3.29568 7.29568 3.2092 7.2092 3.14736 7.10828C3.09253 7.01881 3.05213 6.92127 3.02763 6.81923C3 6.70414 3 6.58185 3 6.33726V4.6Z"
                        stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </g>
                  </svg>
                </button>

                <!-- Botón remover filtros -->
                <button id="btn-remover-filtros-egreso-detalle" title="Remover filtros"
                  onclick="window.egresoDetalleFilter.resetFilters(); renderEgresosCliente();"
                  class="bg-red-500 p-2 rounded hover:bg-red-400 hidden">
                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"
                    class="size-6">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                      <path
                        d="M15 15L21 21M21 15L15 21M10 21V14.6627C10 14.4182 10 14.2959 9.97237 14.1808C9.94787 14.0787 9.90747 13.9812 9.85264 13.8917C9.7908 13.7908 9.70432 13.7043 9.53137 13.5314L3.46863 7.46863C3.29568 7.29568 3.2092 7.2092 3.14736 7.10828C3.09253 7.01881 3.05213 6.92127 3.02763 6.81923C3 6.70414 3 6.58185 3 6.33726V4.6C3 4.03995 3 3.75992 3.10899 3.54601C3.20487 3.35785 3.35785 3.20487 3.54601 3.10899C3.75992 3 4.03995 3 4.6 3H19.4C19.9601 3 20.2401 3 20.454 3.10899C20.6422 3.20487 20.7951 3.35785 20.891 3.54601C21 3.75992 21 4.03995 21 4.6V6.33726C21 6.58185 21 6.70414 20.9724 6.81923C20.9479 6.92127 20.9075 7.01881 20.8526 7.10828C20.7908 7.2092 20.7043 7.29568 20.5314 7.46863L17 11"
                        stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </g>
                  </svg>
                </button>

              </div>



              <div id="tabla-egresos-detalle-cliente" class="bg-white p-4 rounded shadow mt-1 overflow-x-auto">
                <!-- Aquí se genera dinámicamente la tabla de egresos del cliente -->
              </div>
            </div>


      </section>


      <!-- Modal reutilizable para eliminacion -->
      <div id="modal-confirmacion" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-6 space-y-4 text-center">
          <h2 class="text-xl font-bold text-gray-800" id="modal-titulo">¿Estás seguro?</h2>
          <p class="text-gray-600" id="modal-mensaje">Esta acción no se puede deshacer.</p>

          <div class="flex justify-center gap-4 mt-6">
            <button id="btn-cancelar" class="px-4 py-2 border text-gray-800 rounded hover:bg-gray-200">
              Cancelar
            </button>
            <button id="btn-confirmar" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
              Eliminar
            </button>
          </div>
        </div>
      </div>


      <!-- Modal Reutilizable -->
      <div id="modal-reutilizable"
        class="fixed inset-0 bg-black/50 bg-opacity-40 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6">

          <!-- Título -->
          <h2 id="modal-reutilizable-tittle" class="text-2xl font-bold text-center mb-4">Título del Modal</h2>

          <!-- Formulario dinámico -->
          <div class="modal-body space-y-3">
            <div id="modal-content">
              <!-- Aquí se inyecta el contenido modal.js -->
            </div>

            <form id="form-modal" class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Aquí se inyecta el contenido modal.js -->
            </form>

            <div id="modal-foot" class="flex flex-col sm:flex-row justify-end gap-2 mt-4">
              <!-- Botones dinámicos -->
            </div>
          </div>

        </div>
      </div>

      
    </main>
  </div>



  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

</body>

</html>